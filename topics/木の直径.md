直径を得るアルゴリズムとしては、適当にBFSとかを2回でよい。Double-Sweep.

## 木の中心
重要な関連語として、**木の中心**がある。直径の中心に点を置いてやれば、それが中心となる。
中心を用いて(基準にして)頂点らをグループ分けすることで、考察の助けになる場合がある。

グループはそれぞれが(根付き)部分木の形を成しており、それぞれのグループ同士で深さが最も深い部分木の、葉にあたる頂点が、直径の端点となりうる頂点である。
同じグループ内の頂点間の距離が直径を超えることはない (定義からしてそうだが). その部分木の根までの距離が $\frac{d}{2}$ 以上となる頂点は存在しない (d=直径の長さ).

直径の長さが奇数か偶数かで場合分けが必要になる (辺に重みがなければ)。

### 奇数
奇数ということは間の辺が奇数本で頂点数は偶数ともいえる.
この場合、中心はある辺の中央にくる。頂点上には中心がこない。
よって必ず二つのグループに分けられる。

## 偶数
間の辺の数が、偶数本.
この場合、中心はある頂点に重なる。
その頂点から伸びる辺の分だけ部分木グループに分けられるので、面倒になる。

--- 

グループ数がどうあれ、ある頂点自身が属していないグループの、任意の「直径の端点となりうる頂点」と結んだときに距離が最大になる。
まぁそのような端点候補の頂点を見つけるのが偶数の場合面倒という話なのだが…

https://www.youtube.com/watch?v=2pl7IaLGUrA&t=4893s

これ(ABC428-E)の公式解説動画である程度言及されている。


### 例: ABC428 E - Farthest Vertex
https://atcoder.jp/contests/abc428/tasks/abc428_e

> $N$ 頂点の木が与えられるので、頂点 $v=1,\dots,N$ について $v$ からの距離が最大となる頂点 $u$ を見つけ頂点番号を出力せよ. ただし、 $u$ の候補が複数考えられる場合、最も番号が大きいものを出力せよ.


という感じ. 大きい番号を出力、がなければ木の直径を適当に求めてどちらかの端点と結べばよいだけ。
では大きい番号と繋ぐには…実は上の内容を把握していれば、そんなに難しいものでもないとわかる。

直径のパリティがどうだろうがグループ数が2個だろうとそれ以上あろうと、直径の端点が同一グループに属してさえいなければ $u$ として適格。
じゃあ、結局二つのグループしか興味がなくなるわけである。一番大きい頂点番号を有する端点を含むグループと、そのグループに含まれない頂点のうち最も大きい頂点番号を持つ端点を含むグループだけに興味がある (Top 1,2のグループというほうが直感的)。
すると、Two-Sweepをするときに、貪欲に大きい頂点番号のものを採用すればよいとわかる。